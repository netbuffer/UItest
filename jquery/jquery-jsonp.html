<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>jquery-jsonp</title>
		<script src="../agile/assets/third/jquery/jquery-2.1.3.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			function testjsonp(){
				$.ajax({
					url:"http://localhost:8080/ssmbootstrap_table/jsonp/tj/1.json",
					dataType:"jsonp",
					data:{"productType":"01",productId:"16"},
					jsonp: "callback",
					success: function(data) {
						console.log("成功");
						console.log(data);
						$("#test").html(JSON.stringify(data));
					},
					error: function(jqXHR){
						console.log(jqXHR);
					}
				});
			}

			function testgetrtxt(){
				$.get("data.txt",{"name":"a"},function(data){
					alert(data);
				},"text");
//				    $.get(url,data,fn)
//					参数	描述
//					url	必需。请求地址
//					data	可选。发送的数据
//					fn	可选。发送请求成功后的回调函数
//					type	可选。返回数据的类型。可以是：string或json类型
			}

			function testpostrjson(){
				$.post("data.json",{"name":"a"},function(data){
					alert(data);
				},"json");
//				    $.post(url,data,fn,type)
//					参数	描述
//					url	必需。请求地址
//					data	必需。发送的数据
//					fn	必需。发送请求成功后的回调函数
//					type	可选。返回数据的类型。可以是：string或json类型
			}

			//java 后端使用cors-filter开放跨域调用 http://software.dzhuvinov.com/cors-filter-installation.html
			function testjsonp2(){
				$.ajax({
					url:"http://localhost:8080/ssmbootstrap_table/jsonp/tj/1.json",
					data:{"productType":"01",productId:"16"},
					jsonp: "callback",
					success: function(data) {
						console.log("成功");
						console.log(data);
						$("#test").html(JSON.stringify(data));
					},
					error: function(jqXHR){
						console.log(jqXHR);
					}
				});
			}

			function testParam(){
				var params = { width:1900, height:1200 };
				var str = jQuery.param(params);
				alert(str);
				alert($.param({a:"testa",b:"testb"}));
			}

			function testAjaxAsync(){
				var data={};
				$.ajax({
                    async : false,
                    type : "GET",
                    // url :"data.json",
                    url :"data.jsonaaa",
                    data:{
                        "type":1
                    },
                    success:function (d, textStatus, jqXHR) {
                        console.log("data：%o",data);
                        console.log("textStatus：%o",textStatus);
                        console.log("jqXHR：%o",jqXHR);
                        data=d;
                        console.log(JSON.stringify(data));
                    },
                    error: function (xhr, status, err) {
                        console.log("xhr:%o", xhr);
                        console.log("status:%o", status);
                        console.log("err:%o", err);
                    }
                });
				if(Object.keys(data).length>0){
                	alert(JSON.stringify(data));
				}
			}
		</script>
	</head>
	<body>
		<button onclick="testjsonp();">jsonp-test</button>&emsp;<button onclick="testjsonp2();">testjsonp2</button>
		<hr />
		<div id="test" style="height: 200px;color: #00CCFF;"></div>
		<div id="test2" style="height: 200px;color:#25A245"></div>
		<script type="text/javascript">
			function testj(data){
				alert(JSON.stringify(data));
				$("#test2").html(JSON.stringify(data));
			}
		</script>
		<script src="//localhost:8080/ssmbootstrap_table/jsonp/tj/1.json?callback=testj" type="text/javascript" charset="utf-8"></script>
	</body>
</html>
